<!DOCTYPE html>
<html>
<head>
    <title>Light Pollution Atlas 2016</title>
    <meta charset="utf-8" />
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.6.0/dist/leaflet.css" />
    <link rel="stylesheet" href="L.Control.Range.css" />

    <style>
        body {
            padding: 0;
            margin: 0;
        }
        html, body, #map {
            height: 100%;
            width: 100%;
        }
    </style>

</head>
<body>

    <div id="map"></div>

    <script src="https://unpkg.com/leaflet@1.6.0/dist/leaflet.js"></script>
    <script src="L.Control.Range.js"></script>
    
    <script>
      var map = L.map('map').setView([0, 0], 2);
      mapLink = '<a href="http://openstreetmap.org" target="_blank">OpenStreetMap</a>';
      infoLink = '<a href="http://djlorenz.github.io/astronomy/lp2016/" target="_blank">Light Pollution Atlas Information</a>';
      var lightpollution = L.tileLayer(
          'tiles/tile_{z}_{x}_{y}.png', {
           minZoom: 2,
           maxZoom: 8,
           tileSize: 1024,
           zoomOffset: -2,
           opacity: 0.5
          })
      var lightpollution9 = L.tileLayer(
          'tiles/tile_{z}_{x}_{y}.png', {
           minZoom: 9,
           maxZoom: 9,
           tileSize: 2048,
           zoomOffset: -3,
           opacity: 0.5
          })
      var lightpollution10 = L.tileLayer(
          'tiles/tile_{z}_{x}_{y}.png', {
           minZoom: 10,
           maxZoom: 10,
           tileSize: 4096,
           zoomOffset: -4,
           opacity: 0.5
          })
      var lightpollution11 = L.tileLayer(
          'tiles/tile_{z}_{x}_{y}.png', {
           minZoom: 11,
           maxZoom: 11,
           tileSize: 8192,
           zoomOffset: -5,
           opacity: 0.5
          })
      var lightpollution12 = L.tileLayer(
          'tiles/tile_{z}_{x}_{y}.png', {
           minZoom: 12,
           maxZoom: 12,
           tileSize: 16384,
           zoomOffset: -6,
           opacity: 0.5
          })
      var lightpollution13 = L.tileLayer(
          'tiles/tile_{z}_{x}_{y}.png', {
           minZoom: 13,
           maxZoom: 13,
           tileSize: 32768,
           zoomOffset: -7,
           opacity: 0.5
          })
      var lightpollution14 = L.tileLayer(
          'tiles/tile_{z}_{x}_{y}.png', {
           minZoom: 14,
           maxZoom: 14,
           tileSize: 65536,
           zoomOffset: -8,
           opacity: 0.5
          })
      var lightpollution15 = L.tileLayer(
          'tiles/tile_{z}_{x}_{y}.png', {
           minZoom: 15,
           maxZoom: 15,
           tileSize: 131072,
           zoomOffset: -9,
           opacity: 0.5
          })
      var lightpollution16 = L.tileLayer(
          'tiles/tile_{z}_{x}_{y}.png', {
           minZoom: 16,
           maxZoom: 16,
           tileSize: 262144,
           zoomOffset: -10,
           opacity: 0.5
          })
      var lightpollution17 = L.tileLayer(
          'tiles/tile_{z}_{x}_{y}.png', {
           minZoom: 17,
           maxZoom: 17,
           tileSize: 524288,
           zoomOffset: -11,
           opacity: 0.5
          })
      layers:[
        L.tileLayer(
          'http://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
          attribution: '&copy; ' + mapLink + ' Contributors | ' + infoLink,
          maxZoom: 17,
          }).addTo(map),
          lightpollution.addTo(map),
          lightpollution9.addTo(map),
          lightpollution10.addTo(map),
          lightpollution11.addTo(map),
          lightpollution12.addTo(map),
          lightpollution13.addTo(map),
          lightpollution14.addTo(map),
          lightpollution15.addTo(map),
          lightpollution16.addTo(map),
          lightpollution17.addTo(map)
         ]

        var control = L.control.range({
            position: 'topright',
            min: 0,
            max: 100,
            value: 50,
            step: 1,
            orient: 'vertical',
            icon: false
        });
        control.on('change input', function(e) {
            console.log(e.value);
            lightpollution.setOpacity(e.value / 100);
            lightpollution9.setOpacity(e.value / 100);
            lightpollution10.setOpacity(e.value / 100);
            lightpollution11.setOpacity(e.value / 100);
            lightpollution12.setOpacity(e.value / 100);
            lightpollution13.setOpacity(e.value / 100);
            lightpollution14.setOpacity(e.value / 100);
            lightpollution15.setOpacity(e.value / 100);
            lightpollution16.setOpacity(e.value / 100);
            lightpollution17.setOpacity(e.value / 100);
        })

        map.addControl(control);

   </script>

</body>
</html>